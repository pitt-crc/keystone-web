<app-layout-side-nav>

  <!-- Header section -->
  <div class="row">
    <div class="col">
      <h1 class="h3">{{ requestTitle }}
        <span class="badge rounded-pill" [ngClass]="{
        'bg-secondary': requestStatus === 'Pending',
        'bg-warning': requestStatus === 'Approved',
        'bg-success': requestStatus === 'Active',
        'bg-danger': requestStatus === 'Denied'
      }">
        {{ requestStatus }}
      </span>
      </h1>
    </div>
    <div class="col-xl-auto text-xl-end">
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#reviewModal">
        Submit Review
      </button>
    </div>
  </div>

  <!-- Modal for submitting review -->
  <div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <!-- Modal Title -->
          <h5 class="modal-title" id="reviewModalLabel">Submit Review</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>General instructions for admins go in this paragraph.</p>
          <form>
            <div class="mb-3 d-flex align-items-center">
              <label class="form-label me-2 align-middle" for="status">Status</label>
              <select class="form-select" id="status" name="status">
                <option value="approve" selected>Approve</option>
                <option value="deny">Deny</option>
              </select>
            </div>
            <table class="table table-sm">
              <thead>
              <tr>
                <th>Cluster</th>
                <th>Requested SUs</th>
                <th>Awarded SUs</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>MPI</td>
                <td>100,000</td>
                <td>
                  <input type="text" class="form-control" id="mpi_awarded_su" name="mpi_awarded_su">
                </td>
              </tr>
              <tr>
                <td>SMP</td>
                <td>150,000</td>
                <td>
                  <input type="text" class="form-control" id="smp_awarded_su" name="smp_awarded_su">
                </td>
              </tr>
              <tr>
                <td>HTC</td>
                <td>0</td>
                <td>
                  <input type="text" class="form-control" id="htc_awarded_su" name="htc_awarded_su">
                </td>
              </tr>
              <tr>
                <td>GPU</td>
                <td>0</td>
                <td>
                  <input type="text" class="form-control" id="gpu_awarded_su" name="gpu_awarded_su">
                </td>
              </tr>
              </tbody>
            </table>
            <div class="mb-3">
              <textarea class="form-control" id="review" rows="3" placeholder="Enter review comments here"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Submit</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Submission details section -->
  <div class="card my-4">
    <div class="card-header">
      <h2 class="h6 my-1">Submission Details</h2>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-xl-4">
          <table>
            <tbody>
            <tr>
              <td style="width: 8rem;"><strong>ID Number:</strong></td>
              <td>#{{ requestID }}</td>
            </tr>
            <tr>
              <td><strong>Submitted:</strong></td>
              <td>{{ requestDate | date }}</td>
            </tr>
            <tr>
              <td><strong>Group Name:</strong></td>
              <td>{{ requestGroup }}</td>
            </tr>
            </tbody>
          </table>
        </div>
        <div class="col-xl">
          <table>
            <tbody>
            <tr>
              <td style="width: 8rem;"><strong>Submitted by:</strong></td>
              <td>{{ submitterGroup }}</td>
            </tr>
            <tr>
              <td><strong>Department:</strong></td>
              <td>{{ submitterDepartment }}</td>
            </tr>
            <tr>
              <td><strong>Role/Position:</strong></td>
              <td>{{ submitterPosition }}</td>
            </tr>
            </tbody>
          </table>
        </div>
        <div class="col-xl-4">
          <table>
            <tbody>
            <tr>
              <td style="width: 8rem;"><strong>Reviewed On:</strong></td>
              <td>
                <span *ngIf="reviewedDate; else noReviewedDate">{{ reviewedDate | date }}</span>
                <ng-template #noReviewedDate>N/A</ng-template>
              </td>
            </tr>
            <tr>
              <td><strong>Start Date:</strong></td>
              <td>
                <span *ngIf="startDate; else noStartDate">{{ startDate | date }}</span>
                <ng-template #noStartDate>N/A</ng-template>
              </td>
            </tr>
            <tr>
              <td><strong>End Date:</strong></td>
              <td>
                <span *ngIf="endDate; else noEndDate">{{ endDate | date }}</span>
                <ng-template #noEndDate>N/A</ng-template>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Requested resources section -->
  <div class="card my-4">
    <div class="card-header">
      <h2 class="h6 my-1">Requested Resources</h2>
    </div>
    <div class="card-body">
      <p>
        The following table details the computational resources awarded under this request.
      </p>
      <table class="table">
        <thead>
        <tr>
          <th class="pt-0">Cluster</th>
          <th class="pt-0">Requested SUs</th>
          <th class="pt-0">Awarded SUs</th>
          <th class="pt-0">Utilization</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let data of clusterData">
          <td>{{ data.cluster }}</td>
          <td>{{ data.requestedSUs | number }}</td>
          <td>{{ data.awardedSUs }}</td>
          <td>
            <div class="progress">
              <div
                  class="progress-bar"
                  role="progressbar"
                  [style.width.%]="data.utilization"
                  [attr.aria-valuenow]="data.utilization"
                  aria-valuemin="0"
                  aria-valuemax="100">
              </div>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Tabbed section for Justification, Insights, and Discussion -->
  <div class="row my-4">
    <!-- Tab selectors -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="justification-tab" data-bs-toggle="tab" data-bs-target="#justification" type="button" role="tab" aria-controls="justification" aria-selected="true">Justification</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="insights-tab" data-bs-toggle="tab" data-bs-target="#insights" type="button" role="tab" aria-controls="insights" aria-selected="false">Insights</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="discussion-tab" data-bs-toggle="tab" data-bs-target="#discussion" type="button" role="tab" aria-controls="discussion" aria-selected="false">Discussion (2)</button>
      </li>
    </ul>

    <!-- Tab content -->
    <div class="tab-content" id="myTabContent">
      <!-- Justification tab content -->
      <div class="tab-pane fade show active" id="justification" role="tabpanel" aria-labelledby="justification-tab">
        <div class="card my-3">
          <div class="card-body">
            <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque iaculis tristique dolor, tincidunt auctor est aliquet ac. Vestibulum a feugiat turpis. Sed interdum lorem sed finibus facilisis. Nam sagittis, lacus a porta semper, lacus dolor dapibus eros, quis tempus velit sapien feugiat odio. Morbi a augue nec risus scelerisque pretium in vel neque. Curabitur fermentum neque in dolor egestas, sit amet vehicula nisi ultrices. Donec pulvinar, enim quis imperdiet pellentesque, mi mauris eleifend enim, et tempus tortor tellus quis tellus. Maecenas euismod diam id libero mollis, non auctor libero facilisis. Donec in metus magna. Suspendisse sit amet consectetur lacus. Maecenas nec convallis magna, consequat sodales nisi.</p>
            <p class="card-text">Sed blandit venenatis dictum. Nulla sit amet urna id velit egestas aliquet. Fusce sodales odio diam, at auctor ex sodales id. Nullam facilisis massa eu sem pharetra pharetra. Aliquam in laoreet metus. Vivamus porta dolor at eros efficitur varius. Pellentesque tortor lectus, porttitor nec elit sed, malesuada aliquet massa. Maecenas vel nisi dignissim, fringilla odio ut, varius nisl. Suspendisse nisi purus, fermentum a finibus a, facilisis id nisi. Morbi tincidunt, nibh ac dignissim accumsan, nulla eros tristique nisi, vitae accumsan ante ipsum in lorem. Mauris rhoncus commodo massa nec efficitur. Cras orci dolor, imperdiet vitae augue et, auctor luctus leo. Aenean a risus quis lacus finibus semper eget eget ante. In dapibus ipsum quis turpis condimentum finibus.</p>
          </div>
          <div class="card-footer">
            <ul class="list-unstyled my-1 d-flex flex-row">
              <li class="mx-1"><span class="text-muted">Attachments:</span></li>
              <li class="mx-1"><a href="#">Attachment 1.pdf</a></li>
              <li class="mx-1"><a href="#">Attachment 2.docx</a></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Insights tab content -->
      <div class="tab-pane fade" id="insights" role="tabpanel" aria-labelledby="insights-tab">
        ...
      </div>

      <!-- discussion tab content -->
      <div class="tab-pane fade" id="discussion" role="tabpanel" aria-labelledby="discussion-tab">
        <div class="card my-3">
          <div class="card-body">
            Gerald Ford
            <span class="float-end text-muted"><i class="bi bi-clock mx-1"></i> June 20th, 3:45 PM</span><br>
            <p class="card-text my-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque iaculis tristique dolor, tincidunt auctor est aliquet ac. Vestibulum a feugiat turpis. Sed interdum lorem sed finibus facilisis. Nam sagittis, lacus a porta semper, lacus dolor dapibus eros, quis tempus velit sapien feugiat odio. Morbi a augue nec risus scelerisque pretium in vel neque. Curabitur fermentum neque in dolor egestas, sit amet vehicula nisi ultrices. Donec pulvinar, enim quis imperdiet pellentesque, mi mauris eleifend enim, et tempus tortor tellus quis tellus. Maecenas euismod diam id libero mollis, non auctor libero facilisis. Donec in metus magna. Suspendisse sit amet consectetur lacus. Maecenas nec convallis magna, consequat sodales nisi.</p>
          </div>
        </div>

        <div class="card my-3">
          <div class="card-body">
            Gerald Ford
            <span class="float-end text-muted"><i class="bi bi-clock mx-1"></i> June 20th, 3:45 PM</span><br>
            <p class="card-text my-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque iaculis tristique dolor, tincidunt auctor est aliquet ac. Vestibulum a feugiat turpis. Sed interdum lorem sed finibus facilisis. Nam sagittis, lacus a porta semper, lacus dolor dapibus eros, quis tempus velit sapien feugiat odio. Morbi a augue nec risus scelerisque pretium in vel neque. Curabitur fermentum neque in dolor egestas, sit amet vehicula nisi ultrices. Donec pulvinar, enim quis imperdiet pellentesque, mi mauris eleifend enim, et tempus tortor tellus quis tellus. Maecenas euismod diam id libero mollis, non auctor libero facilisis. Donec in metus magna. Suspendisse sit amet consectetur lacus. Maecenas nec convallis magna, consequat sodales nisi.</p>
          </div>
        </div>

        <hr>

        <!-- Discussion Comment Form -->
        <div class="my-3">
          <form>
            <div class="mb-3">
              <textarea class="form-control" id="comments" rows="3" placeholder="Enter your comments here"></textarea>
            </div>
            <div class="text-end">
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>

</app-layout-side-nav>
